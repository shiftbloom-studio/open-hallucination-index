services:
  ohi-api:
    build:
      context: .
      dockerfile: Dockerfile
    image: open-hallucination-index:local
    ports:
      - "8080:8080"
    environment:
      API_HOST: "0.0.0.0"
      API_PORT: "8080"
      API_WORKERS: "2"

      LLM_BASE_URL: "http://host.docker.internal:8000/v1"
      LLM_MODEL: "mistralai/Mistral-7B-Instruct-v0.2"
      LLM_API_KEY: "${LLM_API_KEY:-no-key-required}"
      OPENAI_API_KEY: "${LLM_API_KEY:-no-key-required}"

      NEO4J_URI: "bolt://host.docker.internal:7687"
      NEO4J_USER: "neo4j"
      NEO4J_PASSWORD: "password123"
      QDRANT_HOST: "host.docker.internal"
      REDIS_HOST: "host.docker.internal"

    extra_hosts:
      - "host.docker.internal:host-gateway"
